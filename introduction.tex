\input{header.tex}

\setchapterpreamble[u]{% 
\dictum[Anonymous]{Forecasting is the art of saying 
what is going to happen and then to explain 
why it didnâ€™t.}} 

\chapter{Introduction}

Ggplot is an R package for producing statistical graphics.  It builds on the grid graphics system [ref], and uses the philosophy outlined in the Grammar of Graphics [ref] to produce a powerful and flexible plotting system that is still easy to use.  This model of graphics is quite different to the existing base and lattice graphic system and so you'll need to learn a new way of thinking about graphics.  This book provides helps you to do this as well as providing a practical introduction to Ggplot with lots of example code and graphics.

Ggplot grew out of my frustrations with the graphics packages in R, particularly how difficult it was to write functions that encapsulated certain graphical operations.  For example, it is very difficult to write a function that will add a smoother to a plot without making strong assumptions about the structure of the plot.  Ggplot has been designed from the ground up with extensibility in mind.  This extensibility should hopefully smooth the path from being a novice user of ggplot, to an expert and then a developer of new types of graphics.  This book follows a similar path. 

\begin{itemize}
	\item In Chapter One I describe how you can quickly get started using {\tt qplot} to make graphics, just like you can using {\tt plot}.  This chapter introduces several important ggplot concepts: grob functions, aesthetic mappings and facetting.
	
	\item While {\tt qplot} is a quick way to get started, it doesn't give full control over all the  available options, so Chapter Two describes how to build up a plot piece by piece, exercising full control over the available options.  This chapter discusses the components of a plot, laying the ground for the following chapters which describe these components in detail, and teach you how to build you own.  You will also learn some techniques using the reshape package to get data into a form convenient for using with ggplot.

	\item The most crucial component of a plot are the grob functions, and Chapter Three describes what they do, how they work, and lists the most commonly used grob functions.  Mastery of this chapter will give you the ability to pick and choose the most appropriate tool for your visual display needs.  The chapter concludes by showing you how to build your own grob function so that you can begin to extend {\tt gplot}.

	\item Understanding how scales works is crucial for fine tuning the perceptual properties of your plot.  Customising scales gives fine control over the exact appearance of the plot, and helps to support the story that you are telling.  Chapter Four will show you what scales are available, how to adjust their parameters, and how to create your own scales if no built in scale meets your needs.
	
	\item Chapter Five introduces my philosophy of data.  This chapter isn't crucial, but will help you understand the type of data {\tt ggplot} expects, and how to transform your data into that format.  It also discusses facetting in more detail, and discusses some ideas for combining modelling and graphics.
	
	\item Sometimes you need even more control over the output than {\tt ggplot} provides.  In this case, you need to modify the low level grid output that {\tt ggplot} uses to draw the graphics.  In Chapter Six, you will how the output is built up, how to control and modify the output, and how to add additional annotations to the plot.

\end{itemize}

\section{About this book}\label{sec:about_this_book}

This book is available online for free at \url{http://had.co.nz/ggplot/book}.  However, if you want to support the development of ggplot (and save yourself the hassle of printing and binding a large pdf) you can also buy a printed version for \$US 40 (price may change).  

You can find online updates to this book, information about features in the latest version of ggplot, as well as talks and papers at \url{http://had.co.nz/ggplot}.  There is also a gallery of example graphics.  If you would like your graphics to be included in the gallery, please send me reproducible code and a paragraph or two describing your plot.

\section{Installation}\label{sub:installation}

To get started using ggplot, the first thing you need to do is install it.  Make sure you have a recent version of R from \url{http://r-project.org}, and then follow the instructions below to download and install the ggplot package.  If you are not familiar with R, I'd suggest you get a good an R book (I'd recommend XXX) and work through it along with this book.

There are usually two versions of ggplot available, one stable version and one development version. The stable version is well-tested and well-documented before release.  It is available on CRAN, and can be installed with the following R code:

\begin{verbatim}
	install.packages("ggplot", dep=TRUE)
\end{verbatim}

The development version is not so well tested or documented, but includes new features that I'm working on.  It may also contain bug fixes for recently discovered bugs.  It can be installed with this code:

\begin{verbatim}
	install.packages("ggplot", repos="http://www.ggobi.org/r", dep=TRUE)
\end{verbatim}

A changelog listing changes between versions is available on the ggplot website.  I will do my best to make sure that changes are backward compatible, so you shouldn't have to rewrite your old code.  However, from time to time, I may need to make bigger changes that do affect your code.  If you need to ensure that your old code will continue to run, I would recommend using use R's versioned installs:

\begin{verbatim}
	install.packages("ggplot", dep=TRUE, installWithVers=TRUE))
\end{verbatim}

Now installed packages will have a version number associated with them, and you can load a specific version like so:

\begin{verbatim}
	library(ggplot, version="0.3.3")
\end{verbatim}

% Find out more about this.

\section{Problems}\label{sec:problems}

{\tt ggplot} isn't perfect (yet!), so from time-to-time you may encounter something that doesn't way the way you think it should.  If this happens, please email me \href{mailto:h.wickham@gmail.com}{h.wickham@gmail.com} a reproducible example of your problem, as well as a description of what you think should happen.  The more information you provide, the more likely I am going to be able to help you.

\section{R graphics overview}

To give you some idea of how {\tt ggplot} fits into the broader landscape of R graphics, this section describes some of the other graphics packages available in R.

\begin{itemize} 
	\item The problem with base graphics is that it's basically a pen on paper model: you can only draw on top, not modify or delete existing content or change the axes etc.  Base graphics includes both tools for drawing primitives and entire plots. No other plotting system does this.

	\item Grid graphics are a big step up from the drawing capabilities of base graphics. The plot objects can be represented independently of the plot and modified later on. A system of viewports (each containing its own coordinate system) makes it easier to layout complex graphics.

	\item Trellis/lattice uses grid graphics, and is a considerable improvement over base graphics.  The chief advantage of lattice over base graphics is that you can easily produce trellised (or conditioned) plots.  A trellised plot reproduces the same plot for different subsets of the data, a type of small multiple.  Lattice graphics also provide automatic legends, and a range of 3D plots.  However, lattice graphics does not use a formal model of graphics, which can make it hard to extend.

	\item ggplot is an attempt to take the good things about base and lattice graphics and improve on them by having a model which supports the production of any kind of statistical graphic, build on principles outlined in the Grammar of Graphics.  The chief advantage of ggplot are that it has a solid underlying model.  This makes it easy to describe a wide range of graphics with a compact syntax, and separates out different components to make extension easier.

	\item Many other R packages implement specialist graphics but no others provide a framework for producing statistical graphics. While this is fine if you just want to produce a one-off graphic, it is generally hard to combine these with other graphics you may be using.

\end{itemize}

\section{Acknowledgements}\label{sec:acknolwedgements}

I would like to thank: Gabor Grothendienk for early helpful comments.

\input{footer.tex}
