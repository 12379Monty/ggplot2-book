\input{header.tex}

\chapter{Scales}

% \subsection{Scales}\label{sub:scales}
% 
% By default, whenever you specify an aesthetic mapping (eg. {\tt colour=a}) a default scale is automatically added to the plot object (eg. {\tt scale_colour_gradient}).  However, if the default does not do what you want, you will have to manual add a scale to overwrite the existing default.  You do this with scale functions.  Scales are described in detail in chapter XXX.
% 
% Scales are not quite as regular as geom functions, because they have a greater range of appearances.  
% 
% Two types of scales: for continuous data, and for categorical data
% 
% \begin{tabular}{l|p{1in}l}
%  & position & other\\
% \hline
% categorical & 
% Testing one two threee
% 
% How does it work
% r2c2 & r2c3\\
% continuous & r3c2 & r3c3\\
% \hline
% \end{tabular}
% 
% All scales take (at least) the following arguments:
% 
% \begin{itemize}
%   \item name
% \end{itemize}
% 
% Most continuous scales also have:
% 
% \begin{itemize}
%   \item range
%   \item expand
%   \item breaks
%   \item transform
% \end{itemize}
% 
% Most categorical scales also have:
% 
% \begin{itemize}
%   \item range
%   \item breaks
%   \item labels
% \end{itemize}


\section{Introduction}\label{sec:introduction}

Scales control the mapping between data space and aesthetic space.  They convert your data values into aesthetic attributes that can be a perceived: colour, shape, size, etc.  Each type of aesthetic attribute has a default scale, and may have other scales that provide different types of mappings.  For example, the default colour scale uses equally space hues, but other scales allow you to generate a gradient between two or three different colours.  This section describes the basic operation of a scale, the details of all the different scales and instructions on how to make your own.

Scales are added by default whenever you use {\tt qplot} or {\tt ggplot}.  If you want to modify them, you need to manually add a scale to the plot.  This will automatically override any defaults.

% decumar<<< 
% interweave({
% quakes$depthc <- chop(quakes$depth)
% p <- qplot(long, lat, . ~ depthc, data=quakes)
% str(p$scales)
% p <- pscontinuous(p, "x", breaks=c(5,10))
% str(p$scales)
% })
% |||
% >>>

\section{Details}\label{sec:details}

\section{Categories}\label{sec:categories} 

The following aesthetic attributes are available in {\tt ggplot}.  This list is not exhaustive, other authors may add grob functions that use other mappings.  

Any aesthetic that a grob does not understand will be silently ignored.  If a scale is not doing what you expect, make sure to check the you don't have any spelling mistakes, as these will not raise an error message.

Position scales
Other scales
 * categorical
 * continuous

\begin{itemize}
	\item colour
	\item fill
	\item group
	\item linetype
	\item shape
	\item size
	\item dimension: height, width
	\item position: x, y, z
\end{itemize}

There are also a couple of aesthetic attributes that can't be perceived directly.  The most important of these is the {\tt id} aesthetic, which divides the the data set into discrete components.   This is used in line and path plots to separate the data for different lines, and in the groups grob to divide the different groups. 

Scales may take multiple inputs and return multiple outputs.

\subsection{Discrete vs. continuous}\label{sec:discrete_vs_continuous}
\subsection{Colour}\label{sub:colour}
\subsection{Position}\label{sub:position}
\subsection{Grouping}\label{sub:grouping}


\subsection{Computed aesthetics}\label{sub:computed_aesthetics} 

Information about aesthetics computed from statistical transformations.

\section{Customising legends and axes}\label{sec:customising_legends_and_axes}

Each scale function has a ``name'' argument, usually the first argument after the plot name.  This determines the label which will appear on the axis or legend. You can supply text strings (using ``\\n'' for line breaks) or mathematical expressions (as described in \verb|plotmath|):

% decumar<<< 
% interweave({
% p <- qplot(tip, total_bill, data=tips, colour=tip/total_bil)
% sccolour(p, "Tip rate")
% sccolour(p, "This is a very long label\nsplit over two lines")
% sccolour(p, expression(beta * x^2))
% })
% |||
% >>>

\verb|qplot| provides some additional shortcuts for axis labels, see \secref{sec:other_options} for details.


\section{How to write your own}\label{sec:how_to_write_your_own_scales}


\input{footer.tex}
