\providecommand{\setflag}{\newif \ifwhole \wholefalse}
\setflag
\ifwhole\else
\documentclass[oneside,letterpaper]{scrbook}
\usepackage{fullpage}
% \documentclass{svmono}
\usepackage[utf8]{inputenc}
\usepackage[pdftex]{graphicx}
\graphicspath{{_include/}}
\DeclareGraphicsExtensions{.png,.pdf}
\usepackage{microtype}
\usepackage{hyperref}
\usepackage{colortbl}
\usepackage{pdfsync}
\usepackage{alltt}
\usepackage{url}
\usepackage[round,sort&compress,sectionbib]{natbib}
\bibliographystyle{plainnat}

%\setcounter{secnumdepth}{-1}

\title{ggplot}
\author{Hadley Wickham}

\renewcommand{\topfraction}{0.9}	% max fraction of floats at top
\renewcommand{\bottomfraction}{0.8}	% max fraction of floats at bottom
%   Parameters for TEXT pages (not float pages):
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\renewcommand{\dbltopfraction}{0.9}	% fit big float above 2-col. text
\renewcommand{\textfraction}{0.07}	% allow minimal text w. figs
%   Parameters for FLOAT pages (not text pages):
\renewcommand{\floatpagefraction}{0.7}	% require fuller float pages
% N.B.: floatpagefraction MUST be less than topfraction !!
\renewcommand{\dblfloatpagefraction}{0.7}	% require fuller float pages

% \newcommand{\geomref}[1]{{\tt #1}} (page \pageref{sub:#1})}
\newcommand{\secref}[1]{\ref{#1} (\pageref{#1})}


%% begin - to go to preamble
\edef\BarAtCode{\the\catcode`\@}
\catcode`\@=11\relax
\newlength{\bar@leftskip}
\newlength{\bar@barwidth}
\newlength{\bar@sepwidth}
\newlength{\bar@textwidth}

\newcommand{\bardefault}{%
  \setlength{\bar@leftskip}{0pt}%
  \setlength{\bar@barwidth}{8pt}%
  \setlength{\bar@sepwidth}{8pt}%
}

\newcommand{\bar@settextwidth}{%
  \setlength{\bar@textwidth}{\textwidth}%
  \addtolength{\bar@textwidth}{-\bar@leftskip}%
  \addtolength{\bar@textwidth}{-\bar@sepwidth}%
  \addtolength{\bar@textwidth}{-\bar@barwidth}%
  \addtolength{\bar@textwidth}{-\leftmargin}%
  \addtolength{\bar@textwidth}{-4pt}%
}

\bardefault\bar@settextwidth
\newenvironment{sidebar}[1][\obeylines]{\par\bigskip\noindent%
  \setlength{\tabcolsep}{0pt}
  \begin{tabular}{l>{\columncolor[gray]{.75}}rcl}%
    \hspace*{\bar@leftskip}&%
    \hspace*{\bar@barwidth}&%
    \hspace*{\bar@sepwidth}&%
    \begin{minipage}[b]{\bar@textwidth}%
      #1}{\end{minipage}\end{tabular}\par\medskip}

\newcommand{\barleftskip}[1]{\setlength{\bar@leftskip}{#1}\bar@settextwidth}
\newcommand{\barbarwidth}[1]{\setlength{\bar@barwidth}{#1}\bar@settextwidth}
\newcommand{\barsepwidth}[1]{\setlength{\bar@sepwidth}{#1}\bar@settextwidth}

\catcode`\@=\BarAtCode\relax
%% end



\raggedbottom

\begin{document}
\fi
