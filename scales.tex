\input{header.tex}

\setchapterpreamble[u]{% 
\dictum[Anonymous]{Forecasting is the art of saying 
what is going to happen and then to explain 
why it didnâ€™t.}} 

\chapter{Scales}

\section{Introduction}\label{sec:introduction}

Scales control the mapping between data space and aesthetic space.  They convert your data values into aesthetic attributes that can be a perceived: colour, shape, size, etc.  Each type of aesthetic attribute has a default scale, and may have other scales that provide different types of mappings.  For example, the default colour scale uses equally space hues, but other scales allow you to generate a gradient between two or three different colours.  This section describes the basic operation of a scale, the details of all the different scales and instructions on how to make your own.

\section{Legend and axis labels}\label{sec:legend_and_axis_labels}

Each scale function has a ``name'' argument, usually the first argument after the plot name.  This determines the label which will appear on the axis or legend. You can supply text strings (using ``\\n'' for line breaks) or mathematical expressions (as described in \verb|plotmath|):

% decumar<<< 
% interweave({
% p <- qplot(tip, total_bill, data=tips, colour=tip/total_bil)
% sccolour(p, "Tip rate")
% sccolour(p, "This is a very long label\nsplit over two lines")
% sccolour(p, expression(beta * x^2))
% })
% |||
% >>>

\verb|qplot| provides some additional shortcuts for axis labels, see \secref{sec:other_options} for details.

\section{Aesthetic attributes}\label{sec:aesthetic_attributes}

The following aesthetic attributes are available in {\tt ggplot}.  This list is not exhaustive, other authors may add grob functions that use other mappings.  

Any aesthetic that a grob does not understand will be silently ignored.  If a scale is not doing what you expect, make sure to check the you don't have any spelling mistakes, as these will not raise an error message.

Position scales
Other scales
 * categorical
 * continuous

\begin{itemize}
	\item colour
	\item fill
	\item group
	\item id
	\item linetype
	\item shape
	\item size
	\item dimension: height, width
	\item position: x, y, z
\end{itemize}

There are also a couple of aesthetic attributes that can't be perceived directly.  The most important of these is the {\tt id} aesthetic, which divides the the data set into discrete components.   This is used in line and path plots to separate the data for different lines, and in the groups grob to divide the different groups. 

Scales may take multiple inputs and return multiple outputs.

\section{Using scales}\label{sec:using_scales}

Scales are added by default whenever you use {\tt qplot} or {\tt ggplot}.  If you want to modify them, you need to manually add a scale to the plot.  This will automatically override any defaults.

% decumar<<< 
% interweave({
% quakes$depthc <- chop(quakes$depth)
% p <- qplot(long, lat, . ~ depthc, data=quakes)
% str(p$scales)
% p <- pscontinuous(p, "x", breaks=c(5,10))
% str(p$scales)
% })
% |||
% >>>

All position scales start with {\tt sc}, all others with {\tt sc}.

\section{How to write your own scales}\label{sec:how_to_write_your_own_scales}


\input{footer.tex}
